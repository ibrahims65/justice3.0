<%- include('../partials/header') %>

<div class="max-w-7xl mx-auto py-6 sm:px-6 lg:px-8">
    <div class="flex items-center mb-8">
        <img src="<%= caseData.booking.person.photoUrl || '/images/logo.svg' %>" alt="Person Photo" class="w-24 h-24 rounded-full mr-6 object-cover">
        <div>
            <h1 class="text-3xl font-bold text-gray-800">Case #<%= caseData.caseNumber %></h1>
            <p class="text-xl text-gray-600">Subject: <%= caseData.booking.person.name %></p>
            <p class="text-gray-600">Status: <%= caseData.status %></p>
        </div>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
        <!-- Sidebar with Navigation Cards -->
        <div class="md:col-span-1">
            <div class="bg-white p-4 rounded-lg shadow-md">
                <h3 class="text-lg font-bold mb-4">Case Modules</h3>
                <nav class="space-y-2">
                    <% Object.keys(counts).forEach(mod => { %>
                        <a href="/police/cases/<%= caseData.id %>/view?module=<%= mod %>"
                           class="flex items-center justify-between px-4 py-2 rounded-md text-sm font-medium
                                  <%= module === mod ? 'bg-blue-500 text-white' : 'text-gray-700 hover:bg-gray-100' %>">
                            <span class="flex items-center">
                                <i class="fas <%= icons[mod] %> w-6 text-center mr-3"></i>
                                <%= labels[mod] %>
                            </span>
                            <span class="px-2 py-1 text-xs font-bold leading-none text-white <%= module === mod ? 'bg-blue-600' : 'bg-gray-400' %> rounded-full">
                                <%= counts[mod] %>
                            </span>
                        </a>
                    <% }) %>
                </nav>
            </div>
        </div>

        <!-- Main Content Area -->
        <div class="md:col-span-3">
            <div class="bg-white p-6 rounded-lg shadow-md">
                <% if (module === 'evidence') { %>
                    <%- include('../partials/evidence-list', { caseData: caseData }) %>
                    <hr class="my-6">
                    <h3 class="text-lg font-bold mb-4">Add Evidence</h3>
                    <%- include('../partials/evidence-form', { caseData: caseData }) %>
                <% } else if (module === 'investigations') { %>
                    <%- include('../partials/investigations-list', { caseData: caseData }) %>
                    <hr class="my-6">
                    <h3 class="text-lg font-bold mb-4">Add Investigation</h3>
                    <%- include('../partials/investigations-form', { caseData: caseData }) %>
                <% } else if (module === 'victims') { %>
                    <%- include('../partials/victims-list', { caseData: caseData }) %>
                    <hr class="my-6">
                    <h3 class="text-lg font-bold mb-4">Add Victim</h3>
                    <%- include('../partials/victim-form', { caseData: caseData }) %>
                <% } else if (module === 'witnesses') { %>
                    <%- include('../partials/witnesses-list', { caseData: caseData }) %>
                    <hr class="my-6">
                    <h3 class="text-lg font-bold mb-4">Add Witness</h3>
                    <%- include('../partials/witness-form', { caseData: caseData }) %>
                <% } else if (module === 'hearings') { %>
                    <%- include('../partials/hearings-list', { caseData: caseData }) %>
                    <hr class="my-6">
                    <h3 class="text-lg font-bold mb-4">Add Hearing</h3>
                    <%- include('../partials/hearing-form', { caseData: caseData }) %>
                <% } else if (module === 'warrants') { %>
                    <%- include('../partials/warrants-list', { caseData: caseData }) %>
                    <hr class="my-6">
                    <h3 class="text-lg font-bold mb-4">Add Warrant</h3>
                    <%- include('../partials/warrants-form', { caseData: caseData }) %>
                <% } %>
            </div>
        </div>
    </div>
</div>

<%- include('../partials/footer') %>
