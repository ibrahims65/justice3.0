<%- include('../partials/header', { title: 'Police Dashboard', user: user, page: '/police/dashboard' }) %>
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
  <div class="bg-white rounded-lg shadow-md p-6">
    <h3 class="text-lg font-medium text-gray-800">Active Bookings</h3>
    <p class="text-3xl font-bold text-blue-500"><%= bookings.filter(b => b.status === 'New Booking').length %></p>
  </div>
  <div class="bg-white rounded-lg shadow-md p-6">
    <h3 class="text-lg font-medium text-gray-800">Total Bookings</h3>
    <p class="text-3xl font-bold text-blue-500"><%= bookings.length %></p>
  </div>
  <div class="bg-white rounded-lg shadow-md p-6">
    <h3 class="text-lg font-medium text-gray-800">Open Cases</h3>
    <p class="text-3xl font-bold text-blue-500"><%= cases.filter(c => c.status !== 'Closed').length %></p>
  </div>
  <div class="bg-white rounded-lg shadow-md p-6">
    <h3 class="text-lg font-medium text-gray-800">Active Warrants</h3>
    <p class="text-3xl font-bold text-blue-500"><%= warrants.length %></p>
  </div>
</div>

<div class="mt-8 grid grid-cols-1 lg:grid-cols-2 gap-8">
  <div class="bg-white rounded-lg shadow-md p-6">
    <h3 class="text-lg font-medium text-gray-800 mb-4">Recent Bookings</h3>
    <ul>
      <% bookings.forEach(booking => { %>
        <li class="border-b border-gray-200 py-2">
          <a href="/people/<%= booking.person.id %>" class="text-blue-500 hover:underline"><%= booking.person.name %></a> - <%= booking.status %>
        </li>
      <% }) %>
    </ul>
  </div>
  <div class="bg-white rounded-lg shadow-md p-6">
    <h3 class="text-lg font-medium text-gray-800 mb-4">Recent Cases</h3>
    <ul>
      <% cases.forEach(caseItem => { %>
        <li class="border-b border-gray-200 py-2">
          <a href="/cases/<%= caseItem.id %>" class="text-blue-500 hover:underline"><%= caseItem.caseNumber %></a> - <%= caseItem.status %>
        </li>
      <% }) %>
    </ul>
  </div>
</div>

<div class="mt-8 bg-white rounded-lg shadow-md p-6">
  <h3 class="text-lg font-medium text-gray-800 mb-4">Active Warrants</h3>
  <table class="w-full">
    <thead>
      <tr>
        <th class="text-left">Case Number</th>
        <th class="text-left">Details</th>
        <th class="text-left">Expires At</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <% warrants.forEach(warrant => { %>
        <tr>
          <td><a href="/cases/<%= warrant.case.id %>" class="text-blue-500 hover:underline"><%= warrant.case.caseNumber %></a></td>
          <td><%= warrant.details %></td>
          <td><%= warrant.expiresAt.toLocaleString() %></td>
          <td>
            <form action="/warrants/<%= warrant.id %>/execute" method="POST">
              <button type="submit" class="bg-green-500 text-white p-1 rounded">Mark as Executed</button>
            </form>
          </td>
        </tr>
      <% }) %>
    </tbody>
  </table>
</div>
