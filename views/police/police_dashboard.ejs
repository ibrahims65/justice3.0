<%- include('../partials/header') %>

<div class="max-w-7xl mx-auto py-6 sm:px-6 lg:px-8">
  <h1 class="text-2xl font-bold text-gray-800 mb-8">Police Dashboard</h1>

  <section class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
    <div class="card bg-white p-6 rounded-lg shadow-md">
      <h3 class="text-xl font-bold mb-4">Navigation</h3>
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
        <a href="/police/cases" class="block bg-blue-500 hover:bg-blue-700 text-white font-bold py-4 px-6 rounded text-center">
          <i class="fas fa-folder-open fa-2x mb-2"></i>
          <p>Manage Cases (<%= caseCount %>)</p>
        </a>
        <a href="/police/people" class="block bg-blue-500 hover:bg-blue-700 text-white font-bold py-4 px-6 rounded text-center">
          <i class="fas fa-user-friends fa-2x mb-2"></i>
          <p>Manage People (<%= personCount %>)</p>
        </a>
      </div>
       <a href="/police/cases/new/step1" class="block mt-4 bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded text-center">Create New Case</a>
    </div>

    <div class="card bg-white p-6 rounded-lg shadow-md">
      <h3 class="text-xl font-bold mb-4 text-red-600">Expiring Custody (Next 24h)</h3>
      <% if (expiringCustody.length > 0) { %>
        <ul class="divide-y divide-gray-200">
          <% expiringCustody.forEach(booking => { %>
            <li class="py-2 flex justify-between items-center">
              <span><%= booking.person.name %></span>
              <a href="/police/remand/new/<%= booking.id %>" class="text-sm bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-1 px-3 rounded">Request Remand</a>
            </li>
          <% }) %>
        </ul>
      <% } else { %>
        <p>No custody holds expiring soon.</p>
      <% } %>
    </div>
  </section>

  <section class="card bg-white p-6 rounded-lg shadow-md">
    <h3 class="text-xl font-bold mb-4">Recent Bookings</h3>
    <table class="min-w-full divide-y divide-gray-200">
      <thead class="bg-gray-50">
        <tr>
          <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Person</th>
          <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Case Number</th>
          <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Booking Date</th>
          <th class="relative px-6 py-3"><span class="sr-only">View</span></th>
        </tr>
      </thead>
      <tbody class="bg-white divide-y divide-gray-200">
        <% recentBookings.forEach(booking => { %>
          <tr>
            <td class="px-6 py-4 whitespace-nowrap"><%= booking.person.name %></td>
            <td class="px-6 py-4 whitespace-nowrap"><%= booking.case ? booking.case.caseNumber : 'N/A' %></td>
            <td class="px-6 py-4 whitespace-nowrap"><%= new Date(booking.bookingDate).toLocaleString() %></td>
            <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
              <a href="/police/cases/<%= booking.case.id %>/view" class="text-indigo-600 hover:text-indigo-900">View Case</a>
            </td>
          </tr>
        <% }) %>
      </tbody>
    </table>
  </section>

</div>

<%- include('../partials/footer') %>
